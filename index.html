<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Happy New Year 2026</title>

<style>
:root{
    --gold:#ffd700;
}

*{box-sizing:border-box}

body{
    margin:0;
    width:100%;
    height:100vh;
    background:radial-gradient(circle at bottom,#111,#000);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    font-family:'Arial Black', sans-serif;
    color:#fff;
}

/* ================= TOP CREDIT ================= */
#credit{
    position:fixed;
    top:12px;
    left:50%;
    transform:translateX(-50%);
    z-index:20;
    font-size:0.95rem;
    letter-spacing:1px;
    text-align:center;
}

#credit a{
    color:var(--gold);
    text-decoration:none;
}

#credit a:hover{
    text-decoration:underline;
}

#visits{
    margin-top:6px;
    font-size:0.8rem;
    opacity:0.8;
}

/* ================= INPUT SCREEN ================= */
#inputScreen{
    position:absolute;
    z-index:10;
    text-align:center;
}

#inputScreen input{
    padding:14px;
    font-size:1.1rem;
    border:none;
    outline:none;
    border-radius:8px;
    width:260px;
    text-align:center;
}

#inputScreen button{
    margin-top:15px;
    padding:12px 30px;
    font-size:1rem;
    background:var(--gold);
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}

/* ================= MAIN CONTENT ================= */
.container{
    display:none;
    position:relative;
    z-index:5;
    text-align:center;
}

/* ================= YEAR ================= */
.year{
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:7.5rem;
    margin-bottom:20px;
}

.digit{
    width:90px;
    height:125px;
    display:flex;
    align-items:center;
    justify-content:center;
    line-height:1;
}

.flip-box{
    overflow:hidden;
    position:relative;
}

.flip-inner{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:200%;
    animation:flip 2s cubic-bezier(.77,0,.18,1) forwards;
    animation-delay:1.5s;
}

.flip-inner span{
    width:100%;
    height:125px;
    display:flex;
    align-items:center;
    justify-content:center;
}

.new{
    color:var(--gold);
    text-shadow:0 0 30px rgba(255,215,0,0.9);
}

/* ================= TEXT ================= */
.wish{
    font-size:1.9rem;
    letter-spacing:4px;
    color:var(--gold);
    opacity:0;
    animation:fadeUp 2s ease forwards;
    animation-delay:3.2s;
}

.from{
    margin-top:10px;
    font-size:1.2rem;
    letter-spacing:2px;
    opacity:0;
    animation:fadeUp 2s ease forwards;
    animation-delay:3.6s;
}

/* ================= CANVAS ================= */
canvas{
    position:absolute;
    inset:0;
}

/* ================= ANIMATIONS ================= */
@keyframes flip{
    from{transform:translateY(0)}
    to{transform:translateY(-50%)}
}

@keyframes fadeUp{
    from{opacity:0; transform:translateY(15px)}
    to{opacity:1; transform:translateY(0)}
}
</style>
</head>

<body>

<!-- ðŸ”— CREDIT + VISITOR COUNT -->
<div id="credit">
    Dev â€“ <a href="https://www.instagram.com/noob_dev_coder?igsh=MXU4bWM2ZjEwaWF4Nw==" target="_blank">
        Noob_dev_coder
    </a>
    <div id="visits">Visitors: loading...</div>
</div>

<canvas id="bg"></canvas>

<!-- INPUT SCREEN -->
<div id="inputScreen">
    <input id="nameInput" placeholder="Enter your name"/>
    <br>
    <button onclick="createLink()">Create Link</button>
</div>

<!-- MAIN CONTENT -->
<div class="container" id="main">
    <div class="year">
        <span class="digit">2</span>
        <span class="digit">0</span>
        <span class="digit">2</span>
        <div class="digit flip-box">
            <div class="flip-inner">
                <span>5</span>
                <span class="new">6</span>
            </div>
        </div>
    </div>

    <div class="wish">Happy New Year 2026</div>
    <div class="from" id="fromText"></div>
</div>

<!-- ðŸ”Š SOUND -->
<audio id="fireSound" loop preload="auto">
    <source src="fireworks.mp3" type="audio/mpeg">
</audio>

<script>
/* ================= VISITOR COUNTER ================= */
// CHANGE namespace/key ONLY if you clone repo
fetch("https://api.countapi.xyz/hit/silent5441-github/HappyNewYear2026")
.then(res => res.json())
.then(data => {
    document.getElementById("visits").innerText =
        "Visitors: " + data.value.toLocaleString();
})
.catch(()=>{
    document.getElementById("visits").innerText = "Visitors: --";
});

/* ================= SOUND ================= */
const fireSound = document.getElementById("fireSound");
let soundStarted = false;

document.addEventListener("click",()=>{
    if(!soundStarted){
        fireSound.play().catch(()=>{});
        soundStarted = true;
    }
},{once:true});

/* ================= URL NAME HANDLING ================= */
const params = new URLSearchParams(window.location.search);
const sender = params.get("from");

if(sender){
    document.getElementById("inputScreen").style.display="none";
    startAnimation(decodeURIComponent(sender));
}

function createLink(){
    const name = document.getElementById("nameInput").value.trim();
    if(!name) return alert("Enter your name");

    const link =
        window.location.origin +
        window.location.pathname +
        "?from=" + encodeURIComponent(name);

    navigator.clipboard.writeText(link);
    alert("Link copied!\n\n" + link);
}

function startAnimation(name){
    document.getElementById("main").style.display="block";
    document.getElementById("fromText").textContent = "â€” From " + name;
}

/* ================= FIREWORKS ================= */
const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d");

function resize(){
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

class Firework{
    constructor(){
        this.x = Math.random()*canvas.width;
        this.y = canvas.height;
        this.ty = Math.random()*canvas.height*0.45;
        this.speed = 7 + Math.random()*4;
        this.exploded = false;
        this.p = [];
        this.color = `hsl(${Math.random()*360},100%,60%)`;
    }
    update(){
        if(!this.exploded){
            this.y -= this.speed;
            if(this.y <= this.ty) this.explode();
        }else{
            this.p.forEach(x=>x.update());
            this.p = this.p.filter(x=>x.a>0);
        }
    }
    draw(){
        if(!this.exploded){
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x,this.y,2,10);
        }else this.p.forEach(x=>x.draw());
    }
    explode(){
        this.exploded = true;
        for(let i=0;i<100;i++)
            this.p.push(new Particle(this.x,this.y,this.color));
    }
}

class Particle{
    constructor(x,y,c){
        this.x=x; this.y=y; this.c=c;
        this.vx=(Math.random()-0.5)*9;
        this.vy=(Math.random()-0.5)*9;
        this.a=1;
    }
    update(){
        this.x+=this.vx;
        this.y+=this.vy;
        this.vy+=0.05;
        this.a-=0.015;
    }
    draw(){
        ctx.globalAlpha=this.a;
        ctx.beginPath();
        ctx.arc(this.x,this.y,2,0,Math.PI*2);
        ctx.fillStyle=this.c;
        ctx.fill();
        ctx.globalAlpha=1;
    }
}

let f=[];
function animate(){
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    if(Math.random()<0.045) f.push(new Firework());
    f.forEach(x=>{x.update();x.draw();});
    f=f.filter(x=>!x.exploded||x.p.length>0);
    requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
